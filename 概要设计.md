赋码：

1. 批量赋码

   批量赋码可以将存量的数据进行批量赋码操作，每次赋码将以区县为最小单位进行赋码，在赋码过程中将展示赋码的总数和赋码的进度

   ![image-20231103102542648](C:\Users\xml00\AppData\Roaming\Typora\typora-user-images\image-20231103102542648.png)

2. 赋码接口（与批量赋码相反，接口针对于一条一条的数据进行赋码）

   > 存在两种赋码情况：
   >
   > 1. 常规赋码：数据校验通过的直接赋码
   >
   > 2. 非常规赋码：数据校验未通过的，将问题记录并作废旧编码，生成新编码

   1. 新申请赋码：原房屋编码为空，共有四种情况

      1. 判断位置在行政区划边界外 --> 返回错误提示
      2. 判断位置在行政区划边界内 --> 是地下建筑 --> **常规赋码**
      3. 判断位置在行政区划边界内 --> 非地下检视 --> 入参图斑与赋码表不相交 --> **常规赋码**
      4. 判断位置在行政区划边界内 --> 非地下检视 --> 入参图斑与赋码表相交 --> 返回错误提示，如需赋码则需调用**非常规赋码接口**

      ![image-20231103104039884](C:\Users\xml00\AppData\Roaming\Typora\typora-user-images\image-20231103104039884.png)

   2. 重新赋码：原房屋编码不为空，共有七种情况

      1. 判断位置在行政区划边界外 --> 返回错误提示
      2. 判断位置在行政区划边界内 --> 是地下建筑 --> 满足重新赋码逻辑 --> 作废原赋码 -->  **常规赋码**
      3. 判断位置在行政区划边界内 --> 是地下建筑 --> 不满足重新赋码逻辑 -->  返回错误提示，如需赋码则需调用**非常规赋码接口**
      4. 判断位置在行政区划边界内 --> 非地下建筑 --> 入参图斑与赋码表相交 --> 相交数量唯一且与入参原编码一致 --> 满足重新赋码逻辑 --> 作废原赋码 -->  **常规赋码**
      5. 判断位置在行政区划边界内 --> 非地下建筑 --> 入参图斑与赋码表相交 --> 相交数量唯一且与入参原编码一致 --> 不满足重新赋码逻辑 --> 返回错误提示，如需赋码则需调用**非常规赋码接口**
      6. 判断位置在行政区划边界内 --> 非地下建筑 --> 入参图斑与赋码表相交 -->  相交数量不唯一或与入参原编码不一致 --> 返回错误提示，如需赋码则需调用**非常规赋码接口**
      7. 判断位置在行政区划边界内 --> 非地下建筑 --> 入参图斑与赋码表不相交 -->  返回错误提示，如需赋码则需调用**非常规赋码接口**

      ![image-20231103104053671](C:\Users\xml00\AppData\Roaming\Typora\typora-user-images\image-20231103104053671.png)

   3. 核验，共有俩种情况

      1. 检查赋码表中存在对应数据 --> 核验成功
      2. 检查赋码表中不存在对应数据 --> 核验失败

      ![image-20231103104453287](C:\Users\xml00\AppData\Roaming\Typora\typora-user-images\image-20231103104453287.png)

   4. 撤销，共有三种情况

      1. 赋码表中不存在对应数据 --> 撤销失败
      2. 赋码表中存在对应数据 --> 已经被撤销 --> 撤销失败
      3. 赋码表中存在对应数据 --> 未被撤销 --> 撤销成功

      ![image-20231103104751437](C:\Users\xml00\AppData\Roaming\Typora\typora-user-images\image-20231103104751437.png)

      

3. 码管理

   通过管理页面可以将所有通过接口进行赋码操作的数据进行统一的管理

![image-20231103112123175](C:\Users\xml00\AppData\Roaming\Typora\typora-user-images\image-20231103112123175.png)